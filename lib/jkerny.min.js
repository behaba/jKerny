(function($){function injector(a,b,c,d){var e=a.text().split(b),f="";if(e.length){$(e).each(function(a,b){f+='<span class="'+c+(a+1)+'">'+b+"</span>"+d});a.empty().append(f)}}function styleAttributes(a,b){var c="",d,e={};a=a.replace(RESGMLcomment,"").replace(REnotATag,"$1");munge(a).replace(REtag,function(a,b,f){b=b.toLowerCase();if(e[b])++e[b];else e[b]=1;if(d=/\bstyle\s*=\s*(%s`\d+`s%)/i.exec(f)){var g=/\bid\s*=\s*(\S+)/i.exec(f);if(g)g="#"+restore(g[1]).replace(/^['"]|['"]$/g,"");else g=b+":eq("+(e[b]-1)+")";c+=[g,"{",restore(d[1]).replace(/^['"]|['"]$/g,""),"}"].join("")}});$.parsecss(c,b)}function processAtRule(a,b){var c=a.split(/\s+/);var d=c.shift();if(d=="media"){var e=restore(c.pop()).slice(1,-1);if($.parsecss.mediumApplies(c.join(" "))){$.parsecss(e,b)}}else if(d="import"){var f=restore(c.shift());if($.parsecss.mediumApplies(c.join(" "))){f=f.replace(/^url\(|\)$/gi,"").replace(/^["']|["']$/g,"");$.get(f,function(a){$.parsecss(a,b)})}}}function restore(a){if(a===undefined)return a;while(match=REmunged.exec(a)){a=a.replace(REmunged,munged[match[1]])}return $.trim(a)}function munge(a,b){a=a.replace(REatcomment,"$1").replace(REcomment_string,function(a,b){if(!b)return"";var c="%s`"+ ++uid+"`s%";munged[uid]=b.replace(/^\\/,"");return c});var c=b?REfull:REbraces;while(match=c.exec(a)){replacement="%b`"+ ++uid+"`b%";munged[uid]=match[0];a=a.replace(c,replacement)}return a}function parsedeclarations(a){var b=munged[a].replace(/^{|}$/g,"");b=munge(b);var c={};$.each(b.split(";"),function(a,b){b=b.split(":");if(b.length<2)return;c[restore(b[0])]=restore(b.slice(1).join(":"))});return c}$.parsecss=function(a,b){var c={};a=munge(a).replace(/@(([^;`]|`[^b]|`b[^%])*(`b%)?);?/g,function(a,c){processAtRule($.trim(c),b);return""});$.each(a.split("`b%"),function(a,b){b=b.split("%b`");if(b.length<2)return;b[0]=restore(b[0]);c[b[0]]=$.extend(c[b[0]]||{},parsedeclarations(b[1]))});b(c)};$.parsecss.mediumApplies=window.media&&window.media.query||function(a){if(!a)return true;if(a in media)return media[a];var b=$('<style media="'+a+'">body {position: relative; z-index: 1;}</style>').appendTo("head");return media[a]=[$("body").css("z-index")==1,b.remove()][0]};$.parsecss.isValidSelector=function(a){var b=$("<style>"+a+"{}</style>").appendTo("head")[0];return[b.styleSheet?!/UNKNOWN/i.test(b.styleSheet.cssText):!!b.sheet.cssRules.length,$(b).remove()][0]};$.parsecss.parseArguments=function(str){if(!str)return[];var ret=[],mungedArguments=munge(str,true).split(/\s+/);for(var i=0;i<mungedArguments.length;++i){var a=restore(mungedArguments[i]);try{ret.push(eval("("+a+")"))}catch(err){ret.push(a)}}return ret};$.parsecss.styleAttributes=styleAttributes;var media={};var munged={};var REbraces=/{[^{}]*}/;var REfull=/\[[^\[\]]*\]|{[^{}]*}|\([^()]*\)|function(\s+\w+)?(\s*%b`\d+`b%){2}/;var REatcomment=/\/\*@((?:[^\*]|\*[^\/])*)\*\//g;var REcomment_string=/(?:\/\*(?:[^\*]|\*[^\/])*\*\/)|(\\.|"(?:[^\\\"]|\\.|\\\n)*"|'(?:[^\\\']|\\.|\\\n)*')/g;var REmunged=/%\w`(\d+)`\w%/;var uid=0;var RESGMLcomment=/<!--([^-]|-[^-])*-->/g;var REnotATag=/(>)[^<]*/g;var REtag=/<(\w+)([^>]*)>/g;var methods={init:function(){return this.each(function(){injector($(this),"","char","")})},words:function(){return this.each(function(){injector($(this)," ","word"," ")})},lines:function(){return this.each(function(){var a="eefec303079ad17405c889e092e105b0";injector($(this).children("br").replaceWith(a).end(),a,"line","")})}};$.fn.lettering=function(a){if(a&&methods[a]){return methods[a].apply(this,[].slice.call(arguments,1))}else if(a==="letters"||!a){return methods.init.apply(this,[].slice.call(arguments,0))}$.error("Method "+a+" does not exist on jQuery.lettering");return this};$.jkerny={lettering_replace:{":word *:first-letter":"span.word span.letter:first-child",":word *:last-letter":"span.word span.letter:last-child",":letter":"span.letter",":word":"span.word",":first-word":"span.word:first-child",":last-word":"span.word:last-child",":first-letter":"span.word:first-child span.letter:first-child",":last-letter":"span.word:last-child span.letter:last-child"},only_selectors:[/span\.(word|letter)/],only_properties:[/-jkerny-(word|letter)-spacing/],pseudo_selectors:/:(hover|active|focus|visited)/,run:function(){var a={},b=this;$("style:not([rel=jkerny]),link[rel=stylesheet]").each(function(){if(this.href){$.ajax({url:this.href,success:function(a){b.parseCss(a)}})}else{b.parseCss(this.innerHTML)}})},parseCss:function(a){var b=this,a=b.convertPseudoSelectors(a);$.parsecss(a,function(a){selectors=b.filterSelectors(a);b.proceedLettering(selectors)})},convertPseudoSelectors:function(a){var b=this;for(var c in b.lettering_replace){a=a.replace(new RegExp(c,"g")," "+b.lettering_replace[c])}return a},runStylesFromText:function(a){var b=this,c=this.filterSelectors(this.parse(a));b.proceedLettering(c)},rawCss:function(a,b){var c=a+" { ";for(attribute in b){c+=attribute+":"+b[attribute]+"; "}c+="} ";return c},applyCss:function(a,b){if(a.indexOf(":hover")>-1){var c=a.split(":hover"),d=$(c[0]);d.on("mouseenter",function(){$styledElements=$.trim(c[1])!=""?$(this).find($.trim(c[1])):$(this);$styledElements.data({"default-style":$styledElements.attr("style")}).css(b)});d.on("mouseleave",function(){$styledElements=$.trim(c[1])!=""?$(this).find($.trim(c[1])):$(this);$styledElements.attr("style",$styledElements.data("default-style"))})}else{$(a).css(b)}},proceedLettering:function(a){var b=this,c="";for(selector in a){var d=$(selector.replace(this.pseudo_selectors,"").split(/ span.(letter|word)/g)[0]);d.not(".jkerny").addClass("jkerny").css("visibility","inherit").lettering("words").children("span").css("display","inline-block").addClass("word").lettering().children("span").css("display","inline-block").addClass("letter");if(typeof a[selector]["-jkerny-letter-spacing"]!="undefined"){var e=a[selector]["-jkerny-letter-spacing"].replace(/[\n\s]+/g," ").split(" ");for(var f=0;f<=e.length;f++){b.applyCss(selector+(selector.indexOf("span.word")>-1?"":" span.word")+(selector.indexOf("span.letter")>-1?"":" span")+":eq("+f+")",{marginRight:e[f]})}}if(typeof a[selector]["-jkerny-word-spacing"]!="undefined"){var e=a[selector]["-jkerny-word-spacing"].replace(/[\n\s]+/g," ").split(" ");for(var f=0;f<=e.length;f++){b.applyCss(selector+(selector.indexOf("span.word")>-1?"":" span.word")+":eq("+f+")",{marginRight:e[f]})}}$.each(b.only_selectors,function(){if(selector.match(this)){c+=b.rawCss(selector,a[selector])}})}$('<style rel="jkerny">'+c+"</style>").appendTo("body")},scanCache:function(a){for(var b in this.cache){if(a.search(new RegExp("^"+b+"[ >]"))>-1)return[this.cache[b],a.replace(new RegExp("^"+b+"[ >]"),"")]}},filterSelectors:function(a){if(typeof a=="undefined")return[];var b=a;if(this.only_selectors&&this.only_selectors.length||this.only_properties&&this.only_properties.length){var c=this.only_selectors,d=this.only_properties,e={},f=[];for(var g=0;g<c.length;g++){for(selector in b){if(typeof c[g]=="string"?selector==c[g]:selector.match(c[g])){e[selector]=b[selector];f.push(b[selector].selector)}}}for(var g=0;g<d.length;g++){for(selector in b){for(attribute in b[selector]){if(typeof d[g]=="string"?attribute.selector==d[g]:attribute.match(d[g])&&jQuery.inArray(selector,f)<0){e[selector]=b[selector];continue}}}}b=e}return b},mediumApplies:function(a){if(!a)return true;if(a in this.media)return this.media[a];if(!this.testDiv){this.testDiv=$('<div id="mediaTestDiv" style="position:relative">').append("<div>").appendTo("body")}var b=$('<style type="text/css" media="'+a+'" />').appendTo("head")[0];try{b.appendChild(document.createTextNode(""))}catch(c){}if(b.styleSheet){b.styleSheet.addRule("#mediaTestDiv","left: 1px")}else if(b.sheet){b.sheet.insertRule("#mediaTestDiv {left: 1px}",0)}this.media[a]=this.testDiv.css("left")=="1px";$(b).remove();return this.media[a]},sanitize:function(a){if(!a)return"";var b=a.replace(/[\n\r]/gi,"");b=b.replace(/\/\*.+?\*\//gi,"");b=b.replace(/\} *\r*\t*\}/,"}");return b},parse:function(a){var b=this.sanitize(a),c=[];b=b.match(/.+?\{.+?\}/gi);if(!b)return[];for(var d=0;d<b.length;d++)if(b[d])c.push({selector:this.parseSelectorName(b[d]),attributes:this.parseAttributes(b[d])});return c},parseSelectorName:function(a){return $.trim(a.match(/^.+?\{/)[0].replace("{",""))},parseAttributes:function(a){var b={};c=a.match(/\{.+?\}/)[0].replace(/[\{\}]/g,"").split(";").slice(0,-1);for(var d=0;d<c.length;d++){if(c[d]){c[d]=c[d].split(":");b[$.trim(c[d][0])]=$.trim(c[d][1])}}return b}}})(jQuery);$(document).ready(function(){$.jkerny.run()})